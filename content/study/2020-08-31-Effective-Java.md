---
layout: study
title: "Effective Java 3/e"
date: "2020-07-23"
template: "study"
description: '이펙티브 자바'
---

# (아이템1) 생성자 대신 정적 팩터리 매서드를 고려하라.

## 장점 5가지

### 이름을 가질 수 있다.

BigInteger(int, int, Random)를 쓰기보단 팩토리 매서드인 BigInteger.probablePrime이 조금 더 prime 값을 반환하는 메서드인것이 보일것이다.

### 호출될 때마다 인스턴스를 새로 생성하지 않다고 된다.

새로 생성 함으로써 immutable class를 지키고

새로 생성한 인ㄴ스턴스를 캐싱하여 재활용하는 식으로 불필요한 객체 생성을 피할 수 있다.

반복되는 요청에 같은 객체를 반환하는 식으로 인스턴스의 라이프 사이클을 통제 할 수 있다. 이것을 인스터스 통제라고 한다.

인스턴스 통제로 인하여 싱글턴, 인스턴스불화 를 만들 수 있다.

### 반환 타입의 하위 타입 객체를 반환할 수 있는 능력이 있다.

타입을 고를 수 있다는것은 엄청난 유연성을 부여한다.

### 네번째, 입력 매개변수에 따라 매번 다른 클래스의 객체를 반환할 수 있다.

반환 타입의 하위 타입이기만 하면 어떤 클래스의 객체를 반환하든 상관없다.

### 정적 팩터리 메서드를 작성하는 시점에서는 반환할 객체의 클래스가  존재하지 않아도 된다.

이런 유연함으로 프레임워크 근간을 만든다.
프레임워크 3개의 핵심 컴포턴트
  - 서비스 인터페이스
    - 구현체의 동작 정의
  - 제공자 등록 API
    - 제공자 구현체를 등록할때 쓰는 것
  - 서비스 접근 API
    - 클라이언트가 서비스 인스턴스를 얻을때 사용하는 것


## 단점

### 상속을 할려면 public이나 protected 생성자가 필요하니 정적 팩터리 매서드만 제공하면 하위 클래스를 만들 수 없다.

상속 보다 컴포지션을 사용하도록 유도하고 불변타입으로 만들려면 이 제약을 지켜야 한다는 점에서 장점이 될 수도 있다.

### 정적 팩터리 매서드는 프로그래머가 찾기 어렵다.

# (아이템2) 생성자에 매개변수가 많다면 빌더를 고려하자.
```java
NutritionFacts cocaCola = new NutritionFacts(240, 8, 100, 0, 35, 27);
```

보단 
```java 
NutritionFacts cocaCola = new NutritionFacts.Builder(240,8).calories(100).sodium(35).carbohydrate(27).build();
```

나아 보일거다.

빌더 패턴은 명명된 선택적 매개변수를 흉내낸거다.
빌더 패턴은 계층적으로 설계된 클래스와 함께 쓰기에 좋다.

그래서 생성자나 정적 팩터리가 처리해야 할 매개변수가 많다면 빌더 패턴을 선택하는 게 더 낫다.